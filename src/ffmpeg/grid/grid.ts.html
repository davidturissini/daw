<template>
    <header class="toolbar">
        <button onclick={onEditButtonClick}>Edit</button>
    </header>
    <ffmpeg-timeline
        if:true={hasAudioWindow}
        class="timeline"
        audio-window={audioWindow}
        ontimelinedrag={onTimelineDrag}
        ontimelinedragstart={onTimelineDragStart}
        ontimelinedragend={onTimelineDragEnd}>
    </ffmpeg-timeline>
    <div class="col-left">
        <slot name="col-left"></slot>
    </div>
    <div class="grid-container">
        <ul>
            <template for:each={gridLines} for:item="gridLine">
                <li style={gridLine.style} key={gridLine.time.milliseconds}></li>
            </template>
        </ul>
        <template for:each={rowViewModels} for:item="row">
            <div
                data-row-id={row.id}
                onmouseup={onGridRowMouseUp}
                onmousedown={onGridRowMouseDown}
                onmousemove={onGridRowMouseMove}
                class="row"
                key={row.id}
                style={row.style}
            >
                <template if:true={hasAudioWindow} for:each={row.ranges} for:item="range">
                    <ffmpeg-audiorange
                        item-id={range.itemId}
                        color={range.color}
                        audio-window={audioWindow}
                        key={range.itemId}
                        range={range.range}
                    >
                    </ffmpeg-audiorange>
                </template>
            </div>
        </template>
        <slot></slot>
    </div>
</template>
