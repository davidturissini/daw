<template>
    <template if:true={instrumentIsDrumMachine}>
        <div class="drum-machine">
            <ol class="sample__switches switch-labels">
                <template for:each={drumMachineSampleLabels} for:item="label">
                    <li key={label} class="switch">{label}</li>
                </template>
            </ol>
            <template for:each={drumMachineKeys} for:item="key">
                <div key={key.id} class="sample">
                    <div class="sample__data">
                        {key.title}
                    </div>
                    <div class="switches-container">
                        <ul class="sample__switches">
                            <template for:each={key.notes} for:item="beat" for:index="beatIndex">
                                <ffmpeg-button
                                    button-color={beat.buttonColor}
                                    key={beat.id}
                                    class={beat.className}
                                    onclick={onBeatClick}
                                    data-id={beat.noteId}
                                    data-key-id={key.id}
                                    data-beat-index={beatIndex}
                                ></ffmpeg-button>
                            </template>
                        </ul>
                    </div>
                </div>
            </template>
        </div>
    </template>
    <template if:true={instrumentIsOscillator}>
        <ffmpeg-piano
            notes={pianoNotes}
            audio-context={pianoAudioContext}
            tempo={projectTempo}
            instrument-id={pianoInstrumentId}
            ongridrangechange={onPianoGridRangeChange}
            range={loopRange}
            ongridclose={onPianoGridClose}
            can-close-grid={canClosePianoGrid}
            onaudiorangechange={onOscillatorNoteRangeChange}
            onaudiorangecreated={onOscillatorNoteCreated}
        >
            <ffmpeg-cursor
                slot="cursor"
                time={loopCurrentTime}
            ></ffmpeg-cursor>
            <template for:each={pianoMidiNotes} for:item="midiNote">
                <ffmpeg-audiorange
                    slot="range"
                    data-row-id={midiNote.note}
                    key={midiNote.id}
                    range={midiNote.range}
                ></ffmpeg-audiorange>
            </template>
        </ffmpeg-piano>
    </template>
</template>
